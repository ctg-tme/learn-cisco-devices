<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Learn Cisco Devices</title>
  <link rel="icon" type="image/png" href="/learn-cisco-devices/shared/assets/images/favicon.png">
  <link rel="stylesheet" href="/learn-cisco-devices/shared/styles/main.css">
</head>

<body>
  <!-- QR Code (dynamically shown/hidden) -->
  <div class="qr-code" id="qrCode" style="display: none;">
    <img id="qrImage" src="" alt="QR Code">
    <p class="qr-text">View on your phone</p>
  </div>

  <!-- Video Modal -->
  <div class="modal" id="videoModal">
    <div class="modal-content">
      <button class="close-button" id="closeModal">Back</button>
      <video id="modalVideo" controls></video>
      <img id="modalGif" style="display: none; max-width: 100%; height: auto;" alt="GIF Animation">
    </div>
  </div>

  <!-- Main Content Container -->
  <div id="app"></div>

  <script src="/learn-cisco-devices/shared/scripts/config.js"></script>
  <script>
    // GitHub Pages SPA routing - redirect 404s to proper routes
    (function() {
      const path = window.location.pathname;
      const params = window.location.search;
      
      // If we're on a 404 page but the path looks like a valid route
      if (path !== '/' && path !== '/index.html' && path !== window.SPA_CONFIG.REPO_NAME + '/' && path !== window.SPA_CONFIG.REPO_NAME + '/index.html') {
        // Extract the route part after the repo name
        const repoName = window.SPA_CONFIG.REPO_NAME;
        let routePath = path;
        
        if (path.startsWith(repoName)) {
          routePath = path.substring(repoName.length);
        }
        
        // Redirect to repo root with the path as a parameter for the SPA to handle
        const baseUrl = window.location.origin + repoName + '/';
        const newUrl = baseUrl + params + (params ? '&' : '?') + 'route=' + encodeURIComponent(routePath);
        window.location.replace(newUrl);
      }
    })();
  </script>
  
  <script src="/learn-cisco-devices/shared/scripts/app.js"></script>
</body>
</html>
